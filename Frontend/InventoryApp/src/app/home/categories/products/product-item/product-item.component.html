<!-- Standart mode -->
<div *ngIf="!(editMode | async); else editableProductItem"
     class="card card-hoverable"
     [routerLink]="['/categories/' + product.categoryId + '/products/' + product.id]">
  <img [src]="product.imgPath" alt="Image was not found" (error)="handleImgError($event)">
  <div class="card-body text-center">
    <p class="card-title">{{ product.name }}</p>
  </div>
  <div class="card-footer text-muted text-center">
    Последнее обновление {{ product.lastUpdate | date: 'shortDate' }}
  </div>
</div>
<!-- Editable mode -->
<ng-template #editableProductItem>
  <div class="card">
    <span contenteditable="true"
          [(contenteditableModel)]="product.imgPath"
          (keydown)="markModel()"
          class="editable-p">{{ product.imgPath }}</span>
    <img [src]="product.imgPath" alt="Card image cap" (error)="handleImgError($event)">
    <div class="card-body text-center">
      <p class="card-title"
         contenteditable="true"
         (keydown)="markModel()"
         [(contenteditableModel)]="product.name">{{ product.name }}</p>
    </div>
    <div class="card-footer text-muted text-center">
      Последнее обновление {{ product.lastUpdate | date: 'shortDate' }}
    </div>
    <button md-raised-button color="primary"
            type="button"
            class="item-action"
            [routerLink]="['/categories/' + product.categoryId + '/products/' + product.id]">
            Полная информация
    </button>
    <button md-raised-button color="warn"
            [disabled]="!product.edited"
            class="item-action"
            (click)="discardChanges()">Discard Changes</button>
  </div>
</ng-template>
